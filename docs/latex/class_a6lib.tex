\hypertarget{class_a6lib}{}\section{A6lib Class Reference}
\label{class_a6lib}\index{A6lib@{A6lib}}


A library for controlling Ai-\/\+Thinker A6 G\+SM modem(also works with others like S\+I\+M800).  




{\ttfamily \#include $<$A6lib.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_a6lib_a5cbcf78590cf824bfaa16b181b6ac4a1}{A6lib}} (Hardware\+Serial $\ast$port)
\item 
\mbox{\hyperlink{class_a6lib_a415ffc3dc0178a4ee8fdf3e718ef14a9}{A6lib}} (Software\+Serial $\ast$port)
\item 
\mbox{\hyperlink{class_a6lib_a318fb5617771079545af012b28f6a1e7}{A6lib}} (uint8\+\_\+t rx\+\_\+pin, uint8\+\_\+t tx\+\_\+pin)
\item 
\mbox{\hyperlink{class_a6lib_aac4fbb7021b2f1741b01d72b606d5081}{$\sim$\+A6lib}} ()
\item 
void \mbox{\hyperlink{class_a6lib_adcc817ae29dd20892faf53fd3a8b1bac}{handle}} ()
\item 
bool \mbox{\hyperlink{class_a6lib_a811c9dfff81c0a4fbdbc9ce824ad83d3}{start}} (uint8\+\_\+t max\+\_\+retry)
\item 
bool \mbox{\hyperlink{class_a6lib_a47499c54e5e1f117d45ee733d85ea9e4}{wait\+For\+Network}} (unsigned long baud, uint16\+\_\+t time\+\_\+out)
\item 
void \mbox{\hyperlink{class_a6lib_add46e8926e5809cc7e33a7ad2817fcc5}{power\+Up}} (int pin)
\item 
void \mbox{\hyperlink{class_a6lib_a8b64136d0c8aba6af51568ff93a5455e}{soft\+Reset}} ()
\item 
void \mbox{\hyperlink{class_a6lib_a7ddb0b59879dcc59290b72a585231ef2}{hard\+Reset}} (uint8\+\_\+t pin)
\item 
\mbox{\hyperlink{_a6lib_8h_ab202700bbeacce7358281dce3cc27607}{Device\+Status}} \mbox{\hyperlink{class_a6lib_a4f3b148920be62b633fbfde7cf4d9b06}{get\+Device\+Status}} ()
\item 
String \mbox{\hyperlink{class_a6lib_a92cc2f3cd1f793bf1bf77a3b528aba81}{get\+Firm\+Ware\+Ver}} ()
\item 
int \mbox{\hyperlink{class_a6lib_a07fc81b3217b490883ec402795839fad}{get\+R\+S\+SI}} ()
\item 
uint8\+\_\+t \mbox{\hyperlink{class_a6lib_a90a1e3733155181d56c02f7973066ddf}{get\+Signal\+Quality}} ()
\item 
time\+\_\+t \mbox{\hyperlink{class_a6lib_aaae53e03a783490c15898843f81498c4}{get\+Real\+Time\+Clock}} ()
\item 
String \mbox{\hyperlink{class_a6lib_a332dca9ec1dabb54b51535f2c5350aae}{get\+Real\+Time\+Clock\+String}} (const String \&format=String())
\item 
String \mbox{\hyperlink{class_a6lib_a365df3e93f910171da9d5914ae1997c2}{get\+I\+M\+EI}} ()
\item 
String \mbox{\hyperlink{class_a6lib_ae1b286d8db58b85e8295a4293ab450db}{get\+S\+M\+S\+Sca}} ()
\item 
\mbox{\hyperlink{_a6lib_8h_a0a43f46ad95cebb665a0d371219a6015}{Register\+Status}} \mbox{\hyperlink{class_a6lib_a7a8beb6c42199ea32f9a73f45f7b500e}{get\+Register\+Status}} ()
\item 
String \mbox{\hyperlink{class_a6lib_a22777c9190a6be69c64010d03b022b3c}{get\+Operator\+Name}} ()
\item 
String \mbox{\hyperlink{class_a6lib_a3b1d337ccece8b0a57881a05934dd250}{send\+U\+S\+SD}} (const String \&ussd\+\_\+code, uint16\+\_\+t timeout=-\/1)
\item 
bool \mbox{\hyperlink{class_a6lib_abd141d94b19ce4221c0aa692c34f9b42}{set\+S\+M\+S\+Storage\+Area}} (\mbox{\hyperlink{_a6lib_8h_a683c3425c199702a4b8b13f7f2518af5}{S\+M\+S\+Storage\+Area}})
\item 
bool \mbox{\hyperlink{class_a6lib_a190d29007bf7cec32f24eeca6dd212b0}{set\+Char\+Set}} (\mbox{\hyperlink{_a6lib_8h_a05ab29788588d54d1b515588e8eb14b0}{Char\+Set}})
\item 
bool \mbox{\hyperlink{class_a6lib_aaf7efdb36c3d8c419a0bf26d5220f91d}{send\+S\+MS}} (const String \&number, const String \&text)
\item 
bool \mbox{\hyperlink{class_a6lib_a0ce431632e4a5e4d26c2d95c83fe7ee5}{send\+P\+DU}} (const String \&number, const String \&content)
\item 
bool \mbox{\hyperlink{class_a6lib_ae7b4dfe629c48b1b36c1409bb4f4720e}{send\+P\+DU}} (const String \&number, uint16\+\_\+t $\ast$content, uint8\+\_\+t len)
\item 
\mbox{\hyperlink{class_s_m_s_info}{S\+M\+S\+Info}} \mbox{\hyperlink{class_a6lib_aad58cce8168f9554470f3afa854afb29}{read\+S\+MS}} (uint8\+\_\+t index)
\item 
bool \mbox{\hyperlink{class_a6lib_acb407d54e8ab25e7549b721ef090c686}{delete\+S\+MS}} (uint8\+\_\+t index, bool del\+\_\+all=false)
\item 
int8\+\_\+t \mbox{\hyperlink{class_a6lib_ac6c57bc2707d968d2ce6c55bdcf22c0c}{get\+S\+M\+S\+List}} (int8\+\_\+t $\ast$buff, uint8\+\_\+t len, \mbox{\hyperlink{_a6lib_8h_a810fca4a55c1c8a606d12c63ed21e041}{S\+M\+S\+Record\+Type}} record)
\item 
void \mbox{\hyperlink{class_a6lib_ab9580c0720252ad9e2d6b67683e3e88f}{add\+Handler}} (\mbox{\hyperlink{_a6lib_8h_a7a1b65425109a6c0a0d203c1fe9bbbe5}{void\+\_\+cb\+\_\+t}})
\item 
void \mbox{\hyperlink{class_a6lib_ac92651260eaefe715ed1e1dc798fa275}{on\+S\+M\+S\+Sent}} (\mbox{\hyperlink{_a6lib_8h_a7b74957a5e4992ea4364e91c175b5d7d}{sms\+\_\+tx\+\_\+cb\+\_\+t}})
\item 
void \mbox{\hyperlink{class_a6lib_a9503f1167ed6fd225aee3086b827803d}{on\+S\+M\+S\+Received}} (\mbox{\hyperlink{_a6lib_8h_a0c0c0674e9fa2ea70a4a13b38abdc0f9}{sms\+\_\+rx\+\_\+cb\+\_\+t}})
\item 
void \mbox{\hyperlink{class_a6lib_ac254b0457036a93d83e1a6fc296f57a0}{on\+S\+M\+S\+Storage\+Full}} (\mbox{\hyperlink{_a6lib_8h_a97f6ff1cf1ed894d22d58ebdb05b8bbf}{sms\+\_\+full\+\_\+cb\+\_\+t}})
\item 
String \mbox{\hyperlink{class_a6lib_a934e8451ed2125f0fee5bc720a99ed91}{send\+Command}} (const String \&command, uint16\+\_\+t reply\+\_\+timeout=2000)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A library for controlling Ai-\/\+Thinker A6 G\+SM modem(also works with others like S\+I\+M800). 

An Arduino library for communicating with the A\+I-\/\+Thinker A6 G\+SM modem, It currently supports E\+S\+P8266 and A\+VR architectures. This small lib mainly intended for Ai-\/\+Thinker A6 modem but may possiblly work with other G\+SM modems supporting standard AT command set (e.\+g S\+I\+M800, S\+I\+M900 ,...). Using this lib is straightforward, you can create an object of \mbox{\hyperlink{class_a6lib}{A6lib}} via Hardware\+Serial, Software\+Serial or just two pin number for built in Software\+Serial. Then you usually should power up your module (\mbox{\hyperlink{class_a6lib_add46e8926e5809cc7e33a7ad2817fcc5}{A6lib\+::power\+Up()}}) and initlize \mbox{\hyperlink{class_a6lib}{A6lib}} object to start communicating with modem at desired baud rate. from now on, use public A\+P\+Is to control your modem and get informations from it. Also there\textquotesingle{}s a rich debugging part inisde the library, to enable it define D\+E\+B\+UG in your environment.

This lib has been modified to be asynchronous, so currently you can pass your functions to register A\+P\+Is to catch these events\+:
\begin{DoxyEnumerate}
\item S\+MS sent
\item S\+MS recevied
\item Storage area is full
\end{DoxyEnumerate}

\begin{DoxyNote}{Note}
A note about \mbox{\hyperlink{class_a6lib_ab9580c0720252ad9e2d6b67683e3e88f}{A6lib\+::add\+Handler()}}\+: When you have some important tasks in your code for example reading keypad etc, you can add a main function for running those tasks and pass it to \mbox{\hyperlink{class_a6lib_ab9580c0720252ad9e2d6b67683e3e88f}{A6lib\+::add\+Handler()}}, when you pass a valid function, lib will call it whenever it\textquotesingle{}s in waiting state (waiting for modem to reply at some time) and thus it\textquotesingle{}ll prevent locking in that precious time.
\end{DoxyNote}
To get start you can check out examples directory. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_a6lib_a5cbcf78590cf824bfaa16b181b6ac4a1}\label{class_a6lib_a5cbcf78590cf824bfaa16b181b6ac4a1}} 
\index{A6lib@{A6lib}!A6lib@{A6lib}}
\index{A6lib@{A6lib}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{A6lib()}{A6lib()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily A6lib\+::\+A6lib (\begin{DoxyParamCaption}\item[{Hardware\+Serial $\ast$}]{port }\end{DoxyParamCaption})}

Constructs \mbox{\hyperlink{class_a6lib}{A6lib}} object with the given serial {\itshape port}. 
\begin{DoxyParams}{Parameters}
{\em port} & Hardware\+Serial object for use inside \mbox{\hyperlink{class_a6lib}{A6lib}}. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_a415ffc3dc0178a4ee8fdf3e718ef14a9}\label{class_a6lib_a415ffc3dc0178a4ee8fdf3e718ef14a9}} 
\index{A6lib@{A6lib}!A6lib@{A6lib}}
\index{A6lib@{A6lib}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{A6lib()}{A6lib()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily A6lib\+::\+A6lib (\begin{DoxyParamCaption}\item[{Software\+Serial $\ast$}]{port }\end{DoxyParamCaption})}

Constructs \mbox{\hyperlink{class_a6lib}{A6lib}} object with the given serial {\itshape port}. 
\begin{DoxyParams}{Parameters}
{\em port} & Software\+Serial object for use inside \mbox{\hyperlink{class_a6lib}{A6lib}} \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_a318fb5617771079545af012b28f6a1e7}\label{class_a6lib_a318fb5617771079545af012b28f6a1e7}} 
\index{A6lib@{A6lib}!A6lib@{A6lib}}
\index{A6lib@{A6lib}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{A6lib()}{A6lib()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily A6lib\+::\+A6lib (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{rx\+\_\+pin,  }\item[{uint8\+\_\+t}]{tx\+\_\+pin }\end{DoxyParamCaption})}

Constructs \mbox{\hyperlink{class_a6lib}{A6lib}} object with the given pin numbers. this is done by creating new Software\+Serial object. 
\begin{DoxyParams}{Parameters}
{\em tx\+\_\+pin} & Software\+Serial TX pin \\
\hline
{\em rx\+\_\+pin} & Software\+Serial RX pin \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_aac4fbb7021b2f1741b01d72b606d5081}\label{class_a6lib_aac4fbb7021b2f1741b01d72b606d5081}} 
\index{A6lib@{A6lib}!````~A6lib@{$\sim$\+A6lib}}
\index{````~A6lib@{$\sim$\+A6lib}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{$\sim$\+A6lib()}{~A6lib()}}
{\footnotesize\ttfamily A6lib\+::$\sim$\+A6lib (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Destroys \mbox{\hyperlink{class_a6lib}{A6lib}} object. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_a6lib_ab9580c0720252ad9e2d6b67683e3e88f}\label{class_a6lib_ab9580c0720252ad9e2d6b67683e3e88f}} 
\index{A6lib@{A6lib}!add\+Handler@{add\+Handler}}
\index{add\+Handler@{add\+Handler}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{add\+Handler()}{addHandler()}}
{\footnotesize\ttfamily void A6lib\+::add\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_a6lib_8h_a7a1b65425109a6c0a0d203c1fe9bbbe5}{void\+\_\+cb\+\_\+t}}}]{cb }\end{DoxyParamCaption})}

Add the \mbox{\hyperlink{class_a6lib}{A6lib}} main handler callback. \mbox{\hyperlink{class_a6lib}{A6lib}} will call this handler when it is inside the waiting routine. it\textquotesingle{}ll prevent lock in your code when you have some critical tasks to run. Note\+: The result of passing loop() to this function is undefined! \mbox{\Hypertarget{class_a6lib_acb407d54e8ab25e7549b721ef090c686}\label{class_a6lib_acb407d54e8ab25e7549b721ef090c686}} 
\index{A6lib@{A6lib}!delete\+S\+MS@{delete\+S\+MS}}
\index{delete\+S\+MS@{delete\+S\+MS}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{delete\+S\+M\+S()}{deleteSMS()}}
{\footnotesize\ttfamily bool A6lib\+::delete\+S\+MS (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{index,  }\item[{bool}]{del\+\_\+all = {\ttfamily false} }\end{DoxyParamCaption})}

Delete a S\+MS from modem prefered storage area. Note\+: if del\+\_\+all is true, index will be ignored and all S\+MS will be deleted in storage area. 
\begin{DoxyParams}{Parameters}
{\em index} & sms index in storage area \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a4f3b148920be62b633fbfde7cf4d9b06}\label{class_a6lib_a4f3b148920be62b633fbfde7cf4d9b06}} 
\index{A6lib@{A6lib}!get\+Device\+Status@{get\+Device\+Status}}
\index{get\+Device\+Status@{get\+Device\+Status}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+Device\+Status()}{getDeviceStatus()}}
{\footnotesize\ttfamily \mbox{\hyperlink{_a6lib_8h_ab202700bbeacce7358281dce3cc27607}{Device\+Status}} A6lib\+::get\+Device\+Status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

get the current modem working status. \begin{DoxyReturn}{Returns}
on of the \mbox{\hyperlink{_a6lib_8h_ab202700bbeacce7358281dce3cc27607}{Device\+Status}} value. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a92cc2f3cd1f793bf1bf77a3b528aba81}\label{class_a6lib_a92cc2f3cd1f793bf1bf77a3b528aba81}} 
\index{A6lib@{A6lib}!get\+Firm\+Ware\+Ver@{get\+Firm\+Ware\+Ver}}
\index{get\+Firm\+Ware\+Ver@{get\+Firm\+Ware\+Ver}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+Firm\+Ware\+Ver()}{getFirmWareVer()}}
{\footnotesize\ttfamily String A6lib\+::get\+Firm\+Ware\+Ver (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the revision identification or firmware version of modem. \begin{DoxyReturn}{Returns}
If success a String contain firmware version, and if fail an empty string. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a365df3e93f910171da9d5914ae1997c2}\label{class_a6lib_a365df3e93f910171da9d5914ae1997c2}} 
\index{A6lib@{A6lib}!get\+I\+M\+EI@{get\+I\+M\+EI}}
\index{get\+I\+M\+EI@{get\+I\+M\+EI}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+I\+M\+E\+I()}{getIMEI()}}
{\footnotesize\ttfamily String A6lib\+::get\+I\+M\+EI (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the modem I\+M\+E\+I(serial number identification). \begin{DoxyReturn}{Returns}
if success a string contain I\+M\+EI number, if fail an empty string. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a22777c9190a6be69c64010d03b022b3c}\label{class_a6lib_a22777c9190a6be69c64010d03b022b3c}} 
\index{A6lib@{A6lib}!get\+Operator\+Name@{get\+Operator\+Name}}
\index{get\+Operator\+Name@{get\+Operator\+Name}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+Operator\+Name()}{getOperatorName()}}
{\footnotesize\ttfamily String A6lib\+::get\+Operator\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the Network operator name. note that the name is read from S\+IM card. \begin{DoxyReturn}{Returns}
if success a String contain the operator name, else an empty String 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_aaae53e03a783490c15898843f81498c4}\label{class_a6lib_aaae53e03a783490c15898843f81498c4}} 
\index{A6lib@{A6lib}!get\+Real\+Time\+Clock@{get\+Real\+Time\+Clock}}
\index{get\+Real\+Time\+Clock@{get\+Real\+Time\+Clock}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+Real\+Time\+Clock()}{getRealTimeClock()}}
{\footnotesize\ttfamily time\+\_\+t A6lib\+::get\+Real\+Time\+Clock (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the real time from modem(the return value is not necessary up to date). \begin{DoxyReturn}{Returns}
if success a value contain time as time\+\_\+t(epoch), if fail an invalid(-\/1) value. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a332dca9ec1dabb54b51535f2c5350aae}\label{class_a6lib_a332dca9ec1dabb54b51535f2c5350aae}} 
\index{A6lib@{A6lib}!get\+Real\+Time\+Clock\+String@{get\+Real\+Time\+Clock\+String}}
\index{get\+Real\+Time\+Clock\+String@{get\+Real\+Time\+Clock\+String}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+Real\+Time\+Clock\+String()}{getRealTimeClockString()}}
{\footnotesize\ttfamily String A6lib\+::get\+Real\+Time\+Clock\+String (\begin{DoxyParamCaption}\item[{const String \&}]{format = {\ttfamily String()} }\end{DoxyParamCaption})}

Get the real time string from modem. please refer to \href{http://www.cplusplus.com/reference/ctime/strftime/}{\tt http\+://www.\+cplusplus.\+com/reference/ctime/strftime/} for format specifier. \begin{DoxyReturn}{Returns}
if success a string contain local time in format yyyy.\+M\+M.\+dd hh\+:mm\+:ss, if fail an empty string. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a7a8beb6c42199ea32f9a73f45f7b500e}\label{class_a6lib_a7a8beb6c42199ea32f9a73f45f7b500e}} 
\index{A6lib@{A6lib}!get\+Register\+Status@{get\+Register\+Status}}
\index{get\+Register\+Status@{get\+Register\+Status}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+Register\+Status()}{getRegisterStatus()}}
{\footnotesize\ttfamily \mbox{\hyperlink{_a6lib_8h_a0a43f46ad95cebb665a0d371219a6015}{Register\+Status}} A6lib\+::get\+Register\+Status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the network registration status of modem. \begin{DoxyReturn}{Returns}
on of the \mbox{\hyperlink{_a6lib_8h_a0a43f46ad95cebb665a0d371219a6015}{Register\+Status}} value 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a07fc81b3217b490883ec402795839fad}\label{class_a6lib_a07fc81b3217b490883ec402795839fad}} 
\index{A6lib@{A6lib}!get\+R\+S\+SI@{get\+R\+S\+SI}}
\index{get\+R\+S\+SI@{get\+R\+S\+SI}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+R\+S\+S\+I()}{getRSSI()}}
{\footnotesize\ttfamily int A6lib\+::get\+R\+S\+SI (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the modem signal strength based on R\+S\+S\+I(measured as d\+Bm). \begin{DoxyReturn}{Returns}
If success a value between -\/113d\+Bm and -\/51d\+Bm and if fail 0. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a90a1e3733155181d56c02f7973066ddf}\label{class_a6lib_a90a1e3733155181d56c02f7973066ddf}} 
\index{A6lib@{A6lib}!get\+Signal\+Quality@{get\+Signal\+Quality}}
\index{get\+Signal\+Quality@{get\+Signal\+Quality}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+Signal\+Quality()}{getSignalQuality()}}
{\footnotesize\ttfamily uint8\+\_\+t A6lib\+::get\+Signal\+Quality (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the modem signal quality level. \begin{DoxyReturn}{Returns}
if success a value between 0-\/100 and if fail 255. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_ac6c57bc2707d968d2ce6c55bdcf22c0c}\label{class_a6lib_ac6c57bc2707d968d2ce6c55bdcf22c0c}} 
\index{A6lib@{A6lib}!get\+S\+M\+S\+List@{get\+S\+M\+S\+List}}
\index{get\+S\+M\+S\+List@{get\+S\+M\+S\+List}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+S\+M\+S\+List()}{getSMSList()}}
{\footnotesize\ttfamily int8\+\_\+t A6lib\+::get\+S\+M\+S\+List (\begin{DoxyParamCaption}\item[{int8\+\_\+t $\ast$}]{buff,  }\item[{uint8\+\_\+t}]{len,  }\item[{\mbox{\hyperlink{_a6lib_8h_a810fca4a55c1c8a606d12c63ed21e041}{S\+M\+S\+Record\+Type}}}]{record }\end{DoxyParamCaption})}

Get the list of available S\+MS in prefered storage area. 
\begin{DoxyParams}{Parameters}
{\em buff} & input buffer to store S\+MS indexes. \\
\hline
{\em len} & size of buff \\
\hline
{\em record} & on of the \mbox{\hyperlink{_a6lib_8h_a810fca4a55c1c8a606d12c63ed21e041}{S\+M\+S\+Record\+Type}}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
if fail -\/1, otherwise number of founded S\+MS. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_ae1b286d8db58b85e8295a4293ab450db}\label{class_a6lib_ae1b286d8db58b85e8295a4293ab450db}} 
\index{A6lib@{A6lib}!get\+S\+M\+S\+Sca@{get\+S\+M\+S\+Sca}}
\index{get\+S\+M\+S\+Sca@{get\+S\+M\+S\+Sca}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{get\+S\+M\+S\+Sca()}{getSMSSca()}}
{\footnotesize\ttfamily String A6lib\+::get\+S\+M\+S\+Sca (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the current S\+MS service center address from modem. \begin{DoxyReturn}{Returns}
if success a string contain S\+CA, if fail an empty string 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_adcc817ae29dd20892faf53fd3a8b1bac}\label{class_a6lib_adcc817ae29dd20892faf53fd3a8b1bac}} 
\index{A6lib@{A6lib}!handle@{handle}}
\index{handle@{handle}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{handle()}{handle()}}
{\footnotesize\ttfamily void A6lib\+::handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

the main handler of \mbox{\hyperlink{class_a6lib}{A6lib}} object. this function needs to be called inside main loop regularly, for callbacks to work correctly. \mbox{\Hypertarget{class_a6lib_a7ddb0b59879dcc59290b72a585231ef2}\label{class_a6lib_a7ddb0b59879dcc59290b72a585231ef2}} 
\index{A6lib@{A6lib}!hard\+Reset@{hard\+Reset}}
\index{hard\+Reset@{hard\+Reset}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{hard\+Reset()}{hardReset()}}
{\footnotesize\ttfamily void A6lib\+::hard\+Reset (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{pin }\end{DoxyParamCaption})}

This function will do a hard reset on module. It\textquotesingle{}s recommended to do this via an N\+M\+OS. Note\+: it will take some time for module to start + register for network. You may also need to reinitilize module with \mbox{\hyperlink{class_a6lib_a811c9dfff81c0a4fbdbc9ce824ad83d3}{A6lib\+::start()}}. 
\begin{DoxyParams}{Parameters}
{\em pin} & the pin number which is connected to modem reset(\+R\+S\+T) pin. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_a9503f1167ed6fd225aee3086b827803d}\label{class_a6lib_a9503f1167ed6fd225aee3086b827803d}} 
\index{A6lib@{A6lib}!on\+S\+M\+S\+Received@{on\+S\+M\+S\+Received}}
\index{on\+S\+M\+S\+Received@{on\+S\+M\+S\+Received}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{on\+S\+M\+S\+Received()}{onSMSReceived()}}
{\footnotesize\ttfamily void A6lib\+::on\+S\+M\+S\+Received (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_a6lib_8h_a0c0c0674e9fa2ea70a4a13b38abdc0f9}{sms\+\_\+rx\+\_\+cb\+\_\+t}}}]{cb }\end{DoxyParamCaption})}

This function will register your callback and will call it when new S\+MS arrives. 
\begin{DoxyParams}{Parameters}
{\em cb} & pointer to callback function \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_ac92651260eaefe715ed1e1dc798fa275}\label{class_a6lib_ac92651260eaefe715ed1e1dc798fa275}} 
\index{A6lib@{A6lib}!on\+S\+M\+S\+Sent@{on\+S\+M\+S\+Sent}}
\index{on\+S\+M\+S\+Sent@{on\+S\+M\+S\+Sent}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{on\+S\+M\+S\+Sent()}{onSMSSent()}}
{\footnotesize\ttfamily void A6lib\+::on\+S\+M\+S\+Sent (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_a6lib_8h_a7b74957a5e4992ea4364e91c175b5d7d}{sms\+\_\+tx\+\_\+cb\+\_\+t}}}]{cb }\end{DoxyParamCaption})}

This function will register your callback and will call it when a S\+MS is sent. 
\begin{DoxyParams}{Parameters}
{\em cb} & pointer to callback function \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_ac254b0457036a93d83e1a6fc296f57a0}\label{class_a6lib_ac254b0457036a93d83e1a6fc296f57a0}} 
\index{A6lib@{A6lib}!on\+S\+M\+S\+Storage\+Full@{on\+S\+M\+S\+Storage\+Full}}
\index{on\+S\+M\+S\+Storage\+Full@{on\+S\+M\+S\+Storage\+Full}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{on\+S\+M\+S\+Storage\+Full()}{onSMSStorageFull()}}
{\footnotesize\ttfamily void A6lib\+::on\+S\+M\+S\+Storage\+Full (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_a6lib_8h_a97f6ff1cf1ed894d22d58ebdb05b8bbf}{sms\+\_\+full\+\_\+cb\+\_\+t}}}]{cb }\end{DoxyParamCaption})}

This function will register your callback and will call it when modem prefered storage area is full. 
\begin{DoxyParams}{Parameters}
{\em cb} & pointer to callback function \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_add46e8926e5809cc7e33a7ad2817fcc5}\label{class_a6lib_add46e8926e5809cc7e33a7ad2817fcc5}} 
\index{A6lib@{A6lib}!power\+Up@{power\+Up}}
\index{power\+Up@{power\+Up}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{power\+Up()}{powerUp()}}
{\footnotesize\ttfamily void A6lib\+::power\+Up (\begin{DoxyParamCaption}\item[{int}]{pin }\end{DoxyParamCaption})}

this optional function will keep the P\+WR pin of modem in high T\+TL at start up to correctly powering the module. A6 modem needs this pin to be in high T\+TL for about 2 sec. 
\begin{DoxyParams}{Parameters}
{\em pin} & the pin number which is connected to modem P\+WR pin(or P\+W\+R\+\_\+\+K\+E\+Y pin). \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a6lib_aad58cce8168f9554470f3afa854afb29}\label{class_a6lib_aad58cce8168f9554470f3afa854afb29}} 
\index{A6lib@{A6lib}!read\+S\+MS@{read\+S\+MS}}
\index{read\+S\+MS@{read\+S\+MS}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{read\+S\+M\+S()}{readSMS()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_s_m_s_info}{S\+M\+S\+Info}} A6lib\+::read\+S\+MS (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{index }\end{DoxyParamCaption})}

Read a S\+MS in modem prefered storage area 
\begin{DoxyParams}{Parameters}
{\em index} & sms index in storage area \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a \mbox{\hyperlink{class_s_m_s_info}{S\+M\+S\+Info}} object contain S\+MS information(number+date+timestamp) on success, and if fail an empty \mbox{\hyperlink{class_s_m_s_info}{S\+M\+S\+Info}} object. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a934e8451ed2125f0fee5bc720a99ed91}\label{class_a6lib_a934e8451ed2125f0fee5bc720a99ed91}} 
\index{A6lib@{A6lib}!send\+Command@{send\+Command}}
\index{send\+Command@{send\+Command}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{send\+Command()}{sendCommand()}}
{\footnotesize\ttfamily String A6lib\+::send\+Command (\begin{DoxyParamCaption}\item[{const String \&}]{command,  }\item[{uint16\+\_\+t}]{reply\+\_\+timeout = {\ttfamily 2000} }\end{DoxyParamCaption})}

Send new command to modem. command should be a valid AT command, otherwise modem will return error with corresponding error code(this function will append ~\newline
 to command). Note\+: you may want to check modem is busy or not with A6lib\+::is\+Busy(). 
\begin{DoxyParams}{Parameters}
{\em command} & the valid command to be sent with AT prefix \\
\hline
{\em reply\+\_\+timeout} & the amount of time(as ms) we wait for reply \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
if success an string contain modem reply, otherwise contain error code 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a0ce431632e4a5e4d26c2d95c83fe7ee5}\label{class_a6lib_a0ce431632e4a5e4d26c2d95c83fe7ee5}} 
\index{A6lib@{A6lib}!send\+P\+DU@{send\+P\+DU}}
\index{send\+P\+DU@{send\+P\+DU}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{send\+P\+D\+U()}{sendPDU()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool A6lib\+::send\+P\+DU (\begin{DoxyParamCaption}\item[{const String \&}]{number,  }\item[{const String \&}]{content }\end{DoxyParamCaption})}

Send an A\+S\+C\+II S\+MS in P\+DU mode. 
\begin{DoxyParams}{Parameters}
{\em number} & the detination phone number which should begin with international code \\
\hline
{\em content} & the S\+MS content in A\+S\+C\+II and up to 160 chars \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_ae7b4dfe629c48b1b36c1409bb4f4720e}\label{class_a6lib_ae7b4dfe629c48b1b36c1409bb4f4720e}} 
\index{A6lib@{A6lib}!send\+P\+DU@{send\+P\+DU}}
\index{send\+P\+DU@{send\+P\+DU}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{send\+P\+D\+U()}{sendPDU()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool A6lib\+::send\+P\+DU (\begin{DoxyParamCaption}\item[{const String \&}]{number,  }\item[{uint16\+\_\+t $\ast$}]{content,  }\item[{uint8\+\_\+t}]{len }\end{DoxyParamCaption})}

Send a U\+C\+S2 S\+MS in P\+DU mode. 
\begin{DoxyParams}{Parameters}
{\em number} & the detination phone number which should begin with international code \\
\hline
{\em content} & the S\+MS content coded in U\+C\+S2 format and up to 70 chars. \\
\hline
{\em len} & the number of U\+C\+S2 chars in {\itshape content} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_aaf7efdb36c3d8c419a0bf26d5220f91d}\label{class_a6lib_aaf7efdb36c3d8c419a0bf26d5220f91d}} 
\index{A6lib@{A6lib}!send\+S\+MS@{send\+S\+MS}}
\index{send\+S\+MS@{send\+S\+MS}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{send\+S\+M\+S()}{sendSMS()}}
{\footnotesize\ttfamily bool A6lib\+::send\+S\+MS (\begin{DoxyParamCaption}\item[{const String \&}]{number,  }\item[{const String \&}]{text }\end{DoxyParamCaption})}

Send S\+MS (in text mode) to specified number. 
\begin{DoxyParams}{Parameters}
{\em number} & valid destination number without + \\
\hline
{\em text} & S\+MS content in ascii encoding \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a3b1d337ccece8b0a57881a05934dd250}\label{class_a6lib_a3b1d337ccece8b0a57881a05934dd250}} 
\index{A6lib@{A6lib}!send\+U\+S\+SD@{send\+U\+S\+SD}}
\index{send\+U\+S\+SD@{send\+U\+S\+SD}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{send\+U\+S\+S\+D()}{sendUSSD()}}
{\footnotesize\ttfamily String A6lib\+::send\+U\+S\+SD (\begin{DoxyParamCaption}\item[{const String \&}]{ussd\+\_\+code,  }\item[{uint16\+\_\+t}]{timeout = {\ttfamily -\/1} }\end{DoxyParamCaption})}

\mbox{\Hypertarget{class_a6lib_a190d29007bf7cec32f24eeca6dd212b0}\label{class_a6lib_a190d29007bf7cec32f24eeca6dd212b0}} 
\index{A6lib@{A6lib}!set\+Char\+Set@{set\+Char\+Set}}
\index{set\+Char\+Set@{set\+Char\+Set}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{set\+Char\+Set()}{setCharSet()}}
{\footnotesize\ttfamily bool A6lib\+::set\+Char\+Set (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_a6lib_8h_a05ab29788588d54d1b515588e8eb14b0}{Char\+Set}}}]{set }\end{DoxyParamCaption})}

set the module charset. 
\begin{DoxyParams}{Parameters}
{\em charset} & the required charset. could be on of the \+::\+Charset value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_abd141d94b19ce4221c0aa692c34f9b42}\label{class_a6lib_abd141d94b19ce4221c0aa692c34f9b42}} 
\index{A6lib@{A6lib}!set\+S\+M\+S\+Storage\+Area@{set\+S\+M\+S\+Storage\+Area}}
\index{set\+S\+M\+S\+Storage\+Area@{set\+S\+M\+S\+Storage\+Area}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{set\+S\+M\+S\+Storage\+Area()}{setSMSStorageArea()}}
{\footnotesize\ttfamily bool A6lib\+::set\+S\+M\+S\+Storage\+Area (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_a6lib_8h_a683c3425c199702a4b8b13f7f2518af5}{S\+M\+S\+Storage\+Area}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{class_a6lib_a8b64136d0c8aba6af51568ff93a5455e}\label{class_a6lib_a8b64136d0c8aba6af51568ff93a5455e}} 
\index{A6lib@{A6lib}!soft\+Reset@{soft\+Reset}}
\index{soft\+Reset@{soft\+Reset}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{soft\+Reset()}{softReset()}}
{\footnotesize\ttfamily void A6lib\+::soft\+Reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function implement a software restart on module(if suppoerted). Note\+: it will take some time for module to start + register for network. You may also need to reinitilize module with \mbox{\hyperlink{class_a6lib_a811c9dfff81c0a4fbdbc9ce824ad83d3}{A6lib\+::start()}}. \mbox{\Hypertarget{class_a6lib_a811c9dfff81c0a4fbdbc9ce824ad83d3}\label{class_a6lib_a811c9dfff81c0a4fbdbc9ce824ad83d3}} 
\index{A6lib@{A6lib}!start@{start}}
\index{start@{start}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily bool A6lib\+::start (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{max\+\_\+retry }\end{DoxyParamCaption})}

This is the \mbox{\hyperlink{class_a6lib}{A6lib}} object initlizer routine. you must usually call this after restarting your modem following by \mbox{\hyperlink{class_a6lib}{A6lib}}\+:\mbox{\hyperlink{class_a6lib_a47499c54e5e1f117d45ee733d85ea9e4}{wait\+For\+Network()}}. 
\begin{DoxyParams}{Parameters}
{\em max\+\_\+retry} & the maximum number of time \mbox{\hyperlink{class_a6lib}{A6lib}} object try to setup modem. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}
\mbox{\Hypertarget{class_a6lib_a47499c54e5e1f117d45ee733d85ea9e4}\label{class_a6lib_a47499c54e5e1f117d45ee733d85ea9e4}} 
\index{A6lib@{A6lib}!wait\+For\+Network@{wait\+For\+Network}}
\index{wait\+For\+Network@{wait\+For\+Network}!A6lib@{A6lib}}
\subsubsection{\texorpdfstring{wait\+For\+Network()}{waitForNetwork()}}
{\footnotesize\ttfamily bool A6lib\+::wait\+For\+Network (\begin{DoxyParamCaption}\item[{unsigned long}]{baud,  }\item[{uint16\+\_\+t}]{time\+\_\+out }\end{DoxyParamCaption})}

This method will wait for modem to trigger the registration indication which is the result of correct netowrk registration. you must call this usually before \mbox{\hyperlink{class_a6lib_a811c9dfff81c0a4fbdbc9ce824ad83d3}{A6lib\+::start()}}. 
\begin{DoxyParams}{Parameters}
{\em baud} & the desired baud rate to start with \\
\hline
{\em time\+\_\+out} & the maximum amount of time \mbox{\hyperlink{class_a6lib}{A6lib}} object wait for network registration indication. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_a6lib_8h}{A6lib.\+h}}\item 
\mbox{\hyperlink{_a6lib_8cpp}{A6lib.\+cpp}}\end{DoxyCompactItemize}
